from Pyfhel import Pyfhel, PyCtxt, PyPtxt
import time

def ciphertextFloatOperations(float1, float2):

    HE = Pyfhel()         
    HE.contextGen(p=65537, base=2, intDigits=64, fracDigits = 32)  
    HE.keyGen()            

    start = time.time()

    ciphertext1 = HE.encryptFrac(float1) 
    ciphertext2 = HE.encryptFrac(float2)

    ciphertextSum = ciphertext1 + ciphertext2         
    ciphertextSub = ciphertext1 - ciphertext2        
    ciphertextMul = ciphertext1 * ciphertext2        

    end = time.time()
    total = end - start


    print(f"\nTekst jawny: {float1} \nSzyfrogram: {ciphertext1}")
    print(f"\nTekst jawny: {float2} \nSzyfrogram: {ciphertext2}\n")


    print(f"Szyfrogram sumy: {ciphertextSum}")
    print(f"Szyfrogram różnicy: {ciphertextSub}")
    print(f"Szyfrogram iloczynu:{ciphertextMul}\n")

    summ = HE.decryptFrac(ciphertextSum)                       
    sub = HE.decryptFrac(ciphertextSub) 
    mul = HE.decryptFrac(ciphertextMul)
   
    print(f"Suma = {summ}")
    print(f"Różnica = {sub}")
    print(f"Iloraz = {mul}\n")
    
    print("Czas trwania operacji na szyfrogramach: ", total)
    return total


def plaintexttextFloatOperations(float1, float2):

    start = time.time()

    plaintexSum = float1 + float2         
    plaintexSub = float1 - float2        
    plaintexMul = float1 * float2        

    end = time.time()
    total = end - start

    print("Czas trwania operacji na tekście jawnym: ", total)
    return total
